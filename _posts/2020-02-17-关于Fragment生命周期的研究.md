---
layout:     post
title:      【Todo】关于Fragment生命周期的研究
date:       2020-02-17
author:     OldJii
header-img: 
catalog: true
tags:
    - Fragment
    - 生命周期
---
> 持续更新 

> 2020年2月17日 11:02

在FragmentActivity和Fragment的生命周期内打Log，发现了点有意思的东西，在这里做记录，日后抽时间再做整理

具体Log记录如下：

![](https://imgoldjii.oss-cn-beijing.aliyuncs.com/fragmentlog.jpg)

分割线之上是正常在Activity的onCreate()中添加Fragment的生命周期调用情况，分割线之下是在上面的情况下发生Activity重建时生命周期的调用情况（横竖屏切换）

------
> 2020年3月31日 00:38

现在，我们一般都是使用事务`FragmentTransaction`去管理Fragment，提交的Fragment会以一种FragmentTransaction的实现(`BackStackRecord`)的形式装载到一个管理列表里，关键点就在这，这个列表的检查状态、取出Fragment事务进行处理这一系列操作是在Activity的基类中做的，而我们提交事务（试图将Activity与Fragment进行绑定）时肯定是super.onCreate()之后了，所以只能等到下一次，也就是onStart()时。

重建的时候顺序“正常”是因为Activity的`onSaveInstanceState()`中会保存Fragment的状态，并再重建的时候恢复Fragment（具体流程是：从Bundle中get出数据，传入`mFragment.restoreSaveState(data)`），而这个过程是在上述过程（从管理列表取事务进行处理）之前，所以就这样了....